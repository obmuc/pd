#N canvas 219 25 1361 1018 10;
#X obj 949 547 noteout 1;
#X obj 949 518 makenote 64 1000;
#X text 267 27 I would prefer that the selection of state and the playing of the chord be separate from each other... that state 1 always play chord one \, and not be a separate/distinct value that is unrelated to the chord being played.;
#X text 264 162 I would also like to alter the code so that the number of states isn't dependent on hard-coding a specific number of 'choosers'... ideally a variable number of states would be available based on some data in a data structure.;
#X obj 86 311 text define state_probabilities;
#N canvas 108 132 1433 720 testing_stuff 0;
#X obj 63 69 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 335 47 textfile;
#X obj 65 192 qlist;
#X msg 108 77 print;
#X msg 163 137 read markovChordsProbabilities.txt;
#X obj 67 237 r probabilities;
#X obj 67 272 print probs;
#X text 113 181 qlist won't work because it's intended to return values in sequence \, rather than arbitrary indices. use [text get] instead.;
#X obj 586 382 route pitches probabilities;
#X obj 586 436 print pitches;
#X obj 689 436 print probabilities;
#X obj 676 204 print probs-output;
#X msg 676 99 step;
#X obj 676 150 text sequence probs;
#X msg 622 99 line 0;
#X obj 787 176 s reset_sequence;
#X obj 622 68 r reset_sequence;
#X msg 586 327 pitches 1 2 3 23 \, probabilities 4 \\\; 5 \\\; 6 \\\; 9 \\\; 10;
#X obj 839 436 text fromlist probs;
#X obj 590 30 text define -k probs;
#A set 4 \; 5 \; 6 \; 9 \; 10;
#X connect 0 0 2 0;
#X connect 3 0 2 0;
#X connect 4 0 2 0;
#X connect 5 0 6 0;
#X connect 8 0 9 0;
#X connect 8 1 10 0;
#X connect 8 1 18 0;
#X connect 12 0 13 0;
#X connect 13 0 11 0;
#X connect 13 1 15 0;
#X connect 14 0 13 0;
#X connect 16 0 14 0;
#X connect 17 0 8 0;
#X restore 88 154 pd testing_stuff;
#X obj 86 237 loadbang;
#X msg 86 274 read markovChordsProbabilities.txt;
#X obj 841 317 text get state_probabilities;
#X msg 841 259 0;
#X msg 882 259 1;
#X floatatom 868 494 5 0 0 0 - - - 0;
#X floatatom 887 465 5 0 0 0 - - - 0;
#X floatatom 907 435 5 0 0 0 - - - 0;
#X obj 841 661 bng 16 250 50 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000;
#X obj 841 687 random 100;
#X floatatom 841 716 5 0 0 0 - - - 0;
#X msg 927 259 2;
#X floatatom 841 813 5 0 0 0 - - - 0;
#X floatatom 930 651 5 0 0 0 - - - 0;
#X obj 841 193 f 0;
#X obj 841 224 sel 0 1 2;
#X obj 841 80 metro 1000;
#X obj 841 52 tgl 16 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 868 402 unpack f f f s f f f;
#X obj 946 462 s percentagef2;
#X obj 965 442 s percentagef3;
#X obj 985 422 s percentagef4;
#X obj 930 628 r percentagef2;
#X floatatom 1019 693 5 0 0 0 - - - 0;
#X floatatom 1108 737 5 0 0 0 - - - 0;
#X obj 1019 670 r percentagef3;
#X obj 1108 714 r percentagef4;
#X floatatom 974 813 5 0 0 0 - - - 0;
#X floatatom 1108 813 5 0 0 0 - - - 0;
#X obj 841 765 expr $f1 <= $f2 \; $f1 > $f2 && $f1 <= ($f2 + $f3) \; $f1 > ($f2 + $f3) && $f1 <= ($f2 + $f3 + $f4);
#X obj 841 836 sel 1;
#X obj 974 836 sel 1;
#X obj 1108 836 sel 1;
#X obj 866 165 r nextstate;
#X msg 841 863 0;
#X msg 974 863 1;
#X msg 1108 863 2;
#X obj 841 897 s nextstate;
#X obj 815 165 bng 16 250 50 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000;
#X floatatom 798 224 5 0 0 0 - - - 0;
#X floatatom 888 193 5 0 0 0 - - - 0;
#X obj 841 348 t b l;
#X text 272 97 Consider having the chords reset to the first chord on some regular interval (every 4 chords \, etc). Might sound more musical.;
#X obj 970 106 int 0;
#X obj 1018 106 + 1;
#X msg 997 80 0;
#X floatatom 970 134 5 0 0 0 - - - 0;
#X obj 1020 134 sel 7;
#X obj 1020 187 s phrase_reset;
#X obj 856 112 r phrase_reset;
#X obj 997 54 r phrase_reset;
#X obj 996 153 bng 16 250 50 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000;
#X msg 856 139 0;
#N canvas 235 25 886 812 stateChooser 0;
#X text 39 22 Capture the probabilities and pitches separately \, in two different text objects. [text get] can be used to selectively retrieve specific probabilities one at a time (horizontally or vertically). And likewise \, [text get] can be used to retrieve rows of pitches.;
#X obj 94 121 text define -k probabilities;
#A set 0 40 15 10 20 10 5 \; 5 5 20 20 25 25 0 \;;
#X obj 420 471 text get probabilities;
#X obj 72 88 hradio 16 1 0 8 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0;
#X floatatom 532 427 5 0 0 0 Column: - - 0;
#X obj 37 88 vradio 16 1 0 8 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0;
#X floatatom 420 427 5 0 0 0 Row: - - 0;
#X floatatom 420 506 5 0 0 1 Current_Percent - - 0;
#X obj 570 567 random 100;
#X obj 341 200 bng 24 250 50 0 empty empty Start: 0 -8 0 10 #fcfcfc #000000 #000000;
#X floatatom 570 595 5 0 0 0 Random_Number: - - 0;
#X obj 341 257 s start;
#X obj 439 327 r start;
#X obj 387 567 int 0;
#X obj 505 359 int 0;
#X obj 566 359 + 1;
#X obj 491 200 bng 24 250 50 0 empty empty Reset: 0 -8 0 10 #fcfcfc #000000 #000000;
#X obj 491 257 s reset;
#X obj 566 327 r reset;
#X obj 505 383 t b i;
#X obj 432 567 +;
#X obj 420 533 t b i;
#X floatatom 432 595 5 0 0 0 Cumulative_Percent: - - 0;
#X obj 432 636 moses 55;
#X obj 432 696 bng 16 250 50 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000;
#X obj 477 696 tgl 16 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 432 725 s iter;
#X obj 505 327 r iter;
#X obj 469 533 r reset;
#X msg 554 232 set 0;
#X obj 554 257 s setreset;
#X msg 491 232 0;
#X obj 349 471 r setreset;
#X obj 649 567 r setreset;
#X obj 501 637 r setreset;
#X obj 566 383 r setreset;
#X obj 341 232 t b b;
#X obj 402 257 s getrandom;
#X obj 570 533 r getrandom;
#X connect 2 0 7 0;
#X connect 4 0 2 1;
#X connect 6 0 2 0;
#X connect 7 0 21 0;
#X connect 8 0 10 0;
#X connect 9 0 36 0;
#X connect 10 0 23 1;
#X connect 12 0 14 0;
#X connect 13 0 20 0;
#X connect 14 0 15 0;
#X connect 14 0 19 0;
#X connect 15 0 14 1;
#X connect 16 0 29 0;
#X connect 16 0 31 0;
#X connect 18 0 14 1;
#X connect 19 0 6 0;
#X connect 19 1 4 0;
#X connect 20 0 13 1;
#X connect 20 0 22 0;
#X connect 21 0 13 0;
#X connect 21 1 20 1;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 23 1 25 0;
#X connect 24 0 26 0;
#X connect 27 0 14 0;
#X connect 28 0 20 1;
#X connect 28 0 13 1;
#X connect 29 0 30 0;
#X connect 31 0 17 0;
#X connect 32 0 7 0;
#X connect 33 0 10 0;
#X connect 34 0 25 0;
#X connect 35 0 4 0;
#X connect 36 0 11 0;
#X connect 36 1 37 0;
#X connect 38 0 8 0;
#X restore 103 491 pd stateChooser;
#X text 370 257 Need to use 'text' objects to avoid having to use 'unpack' (which requires a specific number of arguments). Instead \, use the set and get features of text objects to be able to manipulate an arbitrary number of arguments.;
#N canvas 680 60 1163 931 original 0;
#X obj 71 314 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 321 426 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 417 426 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 514 426 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X msg 84 640 57 61 64;
#X obj 84 671 unpack f f f;
#X obj 321 505 s chord1;
#X obj 84 742 s voice1;
#X obj 84 607 r chord1;
#X obj 124 718 s voice2;
#X obj 164 694 s voice3;
#X obj 254 671 unpack f f f;
#X obj 254 742 s voice1;
#X obj 294 718 s voice2;
#X obj 334 694 s voice3;
#X obj 424 671 unpack f f f;
#X obj 424 742 s voice1;
#X obj 464 718 s voice2;
#X obj 504 694 s voice3;
#X obj 417 505 s chord2;
#X obj 514 505 s chord3;
#X obj 254 607 r chord2;
#X obj 424 607 r chord3;
#X msg 254 640 60 64 67;
#X msg 424 640 55 59 62;
#X obj 321 314 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 581 314 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 71 180 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 89 180 r state;
#X obj 71 221 f 1;
#X floatatom 108 221 5 0 0 0 - - - 0;
#X obj 71 344 markovStateChooser_abs 5 80;
#X obj 321 344 markovStateChooser_abs 45 60;
#X obj 581 344 markovStateChooser_abs 60 95;
#X obj 71 262 sel 1 2 3;
#X obj 333 477 s state;
#X obj 427 477 s state;
#X obj 529 477 s state;
#X msg 333 452 1;
#X msg 427 452 2;
#X msg 529 452 3;
#X obj 71 143 metro 1000;
#X obj 71 104 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 71 35 key;
#X obj 71 68 sel 32;
#X connect 0 0 31 0;
#X connect 1 0 6 0;
#X connect 1 0 38 0;
#X connect 2 0 19 0;
#X connect 2 0 39 0;
#X connect 3 0 20 0;
#X connect 3 0 40 0;
#X connect 4 0 5 0;
#X connect 5 0 7 0;
#X connect 5 1 9 0;
#X connect 5 2 10 0;
#X connect 8 0 4 0;
#X connect 11 0 12 0;
#X connect 11 1 13 0;
#X connect 11 2 14 0;
#X connect 15 0 16 0;
#X connect 15 1 17 0;
#X connect 15 2 18 0;
#X connect 21 0 23 0;
#X connect 22 0 24 0;
#X connect 23 0 11 0;
#X connect 24 0 15 0;
#X connect 25 0 32 0;
#X connect 26 0 33 0;
#X connect 27 0 29 0;
#X connect 28 0 30 0;
#X connect 28 0 29 1;
#X connect 29 0 34 0;
#X connect 31 0 1 0;
#X connect 31 1 2 0;
#X connect 31 2 3 0;
#X connect 32 0 1 0;
#X connect 32 1 2 0;
#X connect 32 2 3 0;
#X connect 33 0 1 0;
#X connect 33 1 2 0;
#X connect 33 2 3 0;
#X connect 34 0 0 0;
#X connect 34 1 25 0;
#X connect 34 2 26 0;
#X connect 38 0 35 0;
#X connect 39 0 36 0;
#X connect 40 0 37 0;
#X connect 41 0 27 0;
#X connect 42 0 41 0;
#X connect 44 0 42 0;
#X restore 87 124 pd original;
#X text 82 94 Testing Code:;
#X connect 1 0 0 0;
#X connect 1 1 0 1;
#X connect 6 0 7 0;
#X connect 7 0 4 0;
#X connect 8 0 47 0;
#X connect 9 0 8 0;
#X connect 10 0 8 0;
#X connect 11 0 1 0;
#X connect 12 0 1 0;
#X connect 13 0 1 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 16 0 35 0;
#X connect 17 0 8 0;
#X connect 18 0 36 0;
#X connect 19 0 35 1;
#X connect 20 0 21 0;
#X connect 20 0 45 0;
#X connect 21 0 9 0;
#X connect 21 1 10 0;
#X connect 21 2 17 0;
#X connect 22 0 20 0;
#X connect 22 0 49 0;
#X connect 23 0 22 0;
#X connect 24 0 11 0;
#X connect 24 1 12 0;
#X connect 24 2 13 0;
#X connect 24 4 25 0;
#X connect 24 5 26 0;
#X connect 24 6 27 0;
#X connect 28 0 19 0;
#X connect 29 0 35 2;
#X connect 30 0 35 3;
#X connect 31 0 29 0;
#X connect 32 0 30 0;
#X connect 33 0 37 0;
#X connect 34 0 38 0;
#X connect 35 0 18 0;
#X connect 35 1 33 0;
#X connect 35 2 34 0;
#X connect 36 0 40 0;
#X connect 37 0 41 0;
#X connect 38 0 42 0;
#X connect 39 0 20 1;
#X connect 39 0 46 0;
#X connect 40 0 43 0;
#X connect 41 0 43 0;
#X connect 42 0 43 0;
#X connect 44 0 20 0;
#X connect 47 0 14 0;
#X connect 47 1 24 0;
#X connect 49 0 50 0;
#X connect 49 0 52 0;
#X connect 49 0 53 0;
#X connect 50 0 49 1;
#X connect 51 0 49 1;
#X connect 53 0 54 0;
#X connect 55 0 58 0;
#X connect 56 0 51 0;
#X connect 57 0 54 0;
#X connect 58 0 20 1;
